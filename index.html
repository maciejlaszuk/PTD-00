<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>PTD-00 VR/AR Inspection</title>
    <!-- Biblioteka A-Frame (Core WebXR) -->
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <!-- Dodatki do obsługi otoczenia i kontrolerów -->
    <script src="https://unpkg.com/aframe-environment-component@1.3.3/dist/aframe-environment-component.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/c-frame/aframe-extras@7.2.0/dist/aframe-extras.min.js"></script>
  </head>
  <body>
    <!-- Scena z włączonym WebXR. 
         renderer="colorManagement: true;" zapewnia poprawne kolory materiałów z Inventora. 
    -->
    <a-scene xr-mode-ui="enabled: true" renderer="colorManagement: true;">
      
      <!-- ASSETS: Tutaj ładujemy model -->
      <a-assets>
        <a-asset-item id="model-ptd" src="PTD-00.glb"></a-asset-item>
      </a-assets>

      <!-- MODEL 3D -->
      <!-- position: 0 0 -3 -> model stoi 3 metry przed Tobą -->
      <!-- scale: 1 1 1 -> Skala 1:1. Jeśli model jest za duży, zmień np. na 0.1 0.1 0.1 -->
      <a-entity 
        gltf-model="#model-ptd" 
        position="0 0 -2" 
        rotation="0 0 0"
        shadow="receive: true">
      </a-entity>

      <!-- OŚWIETLENIE -->
      <!-- Światło kierunkowe (Słońce) + Ambient (rozproszone) -->
      <a-entity light="type: ambient; intensity: 0.5;"></a-entity>
      <a-entity light="type: directional; castShadow: true; intensity: 1;" position="-1 2 1"></a-entity>

      <!-- GRACZ / KAMERA (RIG) -->
      <!-- movement-controls pozwala chodzić używając gałek na kontrolerach Quest -->
      <a-entity id="rig" movement-controls="fly: true; speed: 0.5" position="0 1.6 2">
        <a-entity camera position="0 0 0" look-controls></a-entity>
        
        <!-- Kontrolery (wizualizacja rąk + obsługa inputu) -->
        <a-entity oculus-touch-controls="hand: left" laser-controls="hand: left" raycaster="objects: .clickable; far: 10"></a-entity>
        <a-entity oculus-touch-controls="hand: right" laser-controls="hand: right" raycaster="objects: .clickable; far: 10"></a-entity>
      </a-entity>

      <!-- TŁO (opcjonalnie wyłącz dla Passthrough AR) -->
      <!-- W trybie VR daje ładny grid inżynierski. W AR Quest nadpisze to obrazem z kamer -->
      <a-entity environment="preset: grid; gridColor: orange; skyType: atmosphere; lighting: none; ground: flat;"></a-entity>

    </a-scene>
  </body>
</html>
